<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="title">防災モード</title>
  <link rel="stylesheet" href="css/bousaion.css">
  <style>
      #googleMapsNaviButtonDisaster {
          background-color: #4285F4;
          color: white;
          margin-top: 10px;
          display: none;
      }
      #googleMapsNaviButtonDisaster:hover {
          background-color: #3367D6;
      }
  </style>
</head>
<body>
  
  <header>
    <div class="header-top">
      <h1 id="headerTitle">防災モード</h1>
      <div class="lang-buttons">
        <button onclick="setLangJ('ja')">日本語</button>
        <button onclick="setLangJ('en')">English</button>
      </div>
    </div>
    <nav>
      <button onclick="location.href='index.html'" id="switchMode">通常モードに切替</button>
    </nav>
    <p class="alert" id="alertMsg">現在、防災モードが有効です。避難情報と災害警報にご注意ください。</p>
  </header>

  <main>
    <div id="map"></div>
    
    <section class="directions-section">
      <h2 id="directionsTitle">経路案内</h2>
      <div class="directions-input-group">
        <label for="startDisaster" id="startLabel">出発地:</label>
        <input type="text" id="startDisaster" placeholder="出発地を入力">
        <button onclick="getCurrentLocationForDirectionsDisaster('startDisaster')" id="currentLocationStartButtonDisaster" class="small-button">現在地</button>
      </div>
      <div class="directions-input-group">
        <label for="endDisaster" id="endLabel">目的地:</label>
        <input type="text" id="endDisaster" placeholder="目的地を入力">
        <button onclick="getCurrentLocationForDirectionsDisaster('endDisaster')" id="currentLocationEndButtonDisaster" class="small-button">現在地</button>
      </div>
      <div class="directions-input-group">
        <label for="travelModeDisaster" id="travelModeLabel">移動手段:</label>
        <select id="travelModeDisaster">
          <option value="DRIVING" id="modeDriving">車</option>
          <option value="WALKING" id="modeWalking">徒歩</option>
          <option value="BICYCLING" id="modeBicycling">自転車</option>
          <option value="TRANSIT" id="modeTransit">電車・公共交通機関</option>
        </select>
      </div>
      <div class="directions-buttons">
        <button onclick="calcRouteDisaster()" id="getDirectionsButton">経路を検索</button>
        <button onclick="clearDirectionsDisaster()" id="clearDirectionsButton">経路をクリア</button>
      </div>
      <div class="directions-buttons">
        <button onclick="openGoogleMapsNaviDisaster()" id="googleMapsNaviButtonDisaster">🗺️ Googleマップでナビ開始</button>
      </div>
      <div id="directionsPanelDisaster" class="directions-panel"></div>
    </section>

    <section class="filter-section">
      <h2 id="disasterFilterTitle">災害タイプで絞り込む</h2>
      
      <!-- 現在の絞り込み状態を大きく表示 -->
      <div class="current-filter-status">
          <span id="currentFilterLabel">現在表示中:</span>
          <strong id="currentFilterName" style="color: #dc3545; font-size: 1.2em; display:block; margin-top:5px;">全て表示</strong>
      </div>

      <div class="filter-buttons-grid">
        <button onclick="filterDisasterMarkers([], 'tsunami')" id="filterTsunamiShelters">津波避難所 (ハザードマップ表示)</button>
        <button onclick="filterDisasterMarkers([], 'volcano')" id="filterVolcanoShelters">火山避難所 (ハワイ島のみ)</button>
        <button onclick="filterDisasterMarkers([], 'hurricane')" id="filterHurricaneShelters">ハリケーン避難所</button>
        <button onclick="filterDisasterMarkers([], 'all')" id="filterAllDisasters">全て表示</button>
        <button onclick="filterDisasterMarkers([], 'hideAll')" id="filterHideAllDisasters">非表示</button>
      </div>
    </section>

    <!-- ハザードマップ凡例専用セクション (津波モード時のみ表示) -->
    <section class="hazard-info-section" id="hazardSection" style="display:none; background-color:#fff0f0; border:1px solid #ffcccc;">
      <h2 id="hazardMapTitle" style="color:#d9534f;">ハザードマップ凡例</h2>
      <div class="hazard-legend-content" style="display:flex; align-items:center;">
           <span class="hazard-box tsunami-zone"></span> 
           <span id="hazardLegendText" style="font-weight:bold;">津波浸水想定区域（危険エリア）</span>
      </div>
    </section>

    <section class="info-section">
     <h2 id="infoTitle">重要情報・公式リンク</h2>
      <ul>
       <li id="shelter"></li>
       <!-- 公式リンク表示エリア -->
       <li id="officialLinkItem" style="margin-top: 15px; padding-top:10px; border-top:1px dashed #ccc;">
           <!-- JSで動的に挿入 -->
       </li>
      </ul>
    </section>

    <section class="legend-section">
      <h2 id="legendTitle">マップアイコン凡例</h2>
      <ul>
       <li id="legendHospital">
           <!-- JSで画像タグを挿入 -->
       </li>
       <li id="legendOtherShelter">
           <!-- JSで画像タグを挿入 -->
       </li>
      </ul>
    </section>

  </main>

  <footer>
    防災ピクトマップA班
  </footer>

  <script src="js/langJ.js"></script>
  <script src="js/tsunami_data.js"></script>
  <script src="js/map_disasterJ.js"></script>
  <!-- API Keyはご自身のものを使用してください -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDO4wBgHnvBDQA8-xO3JfkLflLi9vwpY8U&callback=initMapDisaster&libraries=places,marker,routes,geometry"></script>

</body>
</html>
